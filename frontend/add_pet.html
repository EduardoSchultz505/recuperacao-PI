<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Adicionar Pet</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="adicionar-pet">
    <h3>Adicionar Pet</h3>

    <form id="formPet" enctype="multipart/form-data">
      <div class="input-group">
        <label for="nome">Nome do Pet</label>
        <input type="text" id="nome" name="nome" placeholder="Ex: Rex" required />
      </div>

      <div class="input-group">
        <label for="idade">Idade</label>
        <input type="number" id="idade" name="idade" placeholder="Ex: 3" min="0" />
      </div>

      <div class="input-group">
        <label for="genero">Gênero</label>
        <select id="genero" name="genero">
          <option value="">Selecione</option>
          <option value="macho">Macho</option>
          <option value="femea">Fêmea</option>
        </select>
      </div>

      <div class="input-group">
        <label for="raca">Raça</label>
        <input type="text" id="raca" name="raca" placeholder="Ex: Golden Retriever" />
      </div>

      <div class="input-group">
        <label for="nascimento">Data de Nascimento</label>
        <input type="date" id="nascimento" name="nascimento" />
      </div>

      <div class="input-group foto-upload">
        <label for="foto">Foto do Pet</label>
        <input type="file" id="foto" name="foto" accept="image/*" />
      </div>

      <button type="submit">Salvar Pet</button>
    </form>
  </div>

  <script>
    document.getElementById("formPet").onsubmit = async function (e) {
      e.preventDefault();

      const form = e.target;
      const data = new FormData(form); // necessário para enviar arquivo

      const res = await fetch("http://127.0.0.1:5000/pets", {
        method: "POST",
        body: data
      });

      if (res.ok) {
        alert("Pet criado com sucesso!");
        window.location.href = "pet_list.html";
      } else {
        alert("Erro ao criar pet.");
      }
    };
  </script>
</body>
</html>

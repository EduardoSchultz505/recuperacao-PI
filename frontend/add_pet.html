<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <title>Adicionar Pet - PetCard</title>
  <link rel="stylesheet" href="add_pet.css" />
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>

  <main class="add-pet-container">
    <h2>Adicionar novo Pet</h2>

    <form id="add-pet-form" enctype="multipart/form-data">

      <div class="input-group">
        <label for="nome">Nome</label>
        <input type="text" id="nome" name="nome" placeholder="Nome do seu pet" required />
      </div>

      <div class="input-group">
        <label for="idade">Idade (anos)</label>
        <input type="number" id="idade" name="idade" min="0" max="30" placeholder="Ex: 3" required />
      </div>

      <div class="input-group">
        <label for="genero">Gênero</label>
        <select id="genero" name="genero" required>
          <option value="" disabled selected>Selecione</option>
          <option value="macho">Macho</option>
          <option value="fêmea">Fêmea</option>
        </select>
      </div>

      <div class="input-group">
        <label for="raca">Raça</label>
        <input type="text" id="raca" name="raca" placeholder="Raça do seu pet" />
      </div>

      <div class="input-group">
        <label for="cor">Cor</label>
        <input type="text" id="cor" name="cor" placeholder="Cor do seu pet" />
      </div>

      <div class="input-group foto-upload">
        <label for="foto">Foto (opcional)</label>
        <input type="file" id="foto" name="foto" accept="image/*" />
      </div>

      <button type="submit">Adicionar Pet</button>
    </form>
  </main>

  <nav class="bottom-nav">
    <a href="pet_list.html">
      <img src="./assets/icon/1000074045.png" style="width: 30px;">
      <span>Pets</span>
    </a>
    <a href="add_pet.html">
      <img src="./assets/icon/sqimg_37750798.png" style="width: 30px;">
      <span>Adicionar</span>
    </a>  
  </nav>


  <script>
    const form = document.getElementById('add-pet-form');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const formData = new FormData(form);

      try {
        const response = await fetch('http://127.0.0.1:5000/pets', {
          method: 'POST',
          body: formData
        });

        if (!response.ok) throw new Error('Erro ao adicionar pet');

        alert('Pet adicionado com sucesso!');
        window.location.href = 'pet_list.html';

      } catch (error) {
        alert(error.message);
      }
    });


  </script>

</body>

</html>